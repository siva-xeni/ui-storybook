var f = Object.defineProperty;
var e = (t, n) => f(t, "name", { value: n, configurable: !0 });

// src/test/preview.ts
import { instrument as m } from "storybook/internal/instrumenter";
import { definePreview as p } from "storybook/preview-api";
import {
  clearAllMocks as l,
  fn as b,
  isMockFunction as u,
  resetAllMocks as a,
  restoreAllMocks as k,
  uninstrumentedUserEvent as d,
  within as g
} from "storybook/test";
var w = /* @__PURE__ */ e(({ parameters: t }) => {
  t?.test?.mockReset === !0 ? a() : t?.test?.clearMocks === !0 ? l() : t?.test?.restoreMocks !== !1 && k();
}, "resetAllMocksLoader"), i = /* @__PURE__ */ e((t, n = 0, o) => {
  if (n > 5 || t == null)
    return t;
  if (u(t))
    return o && t.mockName(o), t;
  if (typeof t == "function" && "isAction" in t && t.isAction && !("implicit" in t && t.implicit)) {
    let r = b(t);
    return o && r.mockName(o), r;
  }
  if (Array.isArray(t)) {
    n++;
    for (let r = 0; r < t.length; r++)
      Object.getOwnPropertyDescriptor(t, r)?.writable && (t[r] = i(t[r], n));
    return t;
  }
  if (typeof t == "object" && t.constructor === Object) {
    n++;
    for (let [r, c] of Object.entries(t))
      Object.getOwnPropertyDescriptor(t, r)?.writable && (t[r] = i(c, n, r));
    return t;
  }
  return t;
}, "traverseArgs"), A = /* @__PURE__ */ e(({ initialArgs: t }) => {
  i(t);
}, "nameSpiesAndWrapActionsInSpies"), s = !1, M = /* @__PURE__ */ e(async (t) => {
  if (globalThis.HTMLElement && t.canvasElement instanceof globalThis.HTMLElement && (t.canvas = g(t.canvasElement)), globalThis.window?.navigator?.
  clipboard) {
    t.userEvent = m(
      { userEvent: d.setup() },
      { intercept: !0 }
    ).userEvent;
    let n = HTMLElement.prototype.focus;
    s || Object.defineProperties(HTMLElement.prototype, {
      focus: {
        configurable: !0,
        set: /* @__PURE__ */ e((o) => {
          n = o, s = !0;
        }, "set"),
        get: /* @__PURE__ */ e(() => n, "get")
      }
    });
  }
}, "enhanceContext"), O = /* @__PURE__ */ e(() => p({
  loaders: [w, A, M]
}), "default");
export {
  O as default,
  i as traverseArgs
};
